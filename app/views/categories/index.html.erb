<section>
  <div class="sticky-top">
    <nav class="nav-header w-100 p-3">
      <h1 class="text-uppercase text-center fs-5 mx-0 mt-4 mb-0">Categories</h1>
    </nav>
    
    <div class="d-flex justify-content-between align-items-center mb-3 px-3 py-2 bg-white border-bottom border-2 border-light-subtle">
        <h2 class="fs-5 pt-2">Overall Budget</h2>
        <span class="category-amount fw-bold"><%= number_to_currency(@expenses.sum(&:amount)) %></span>
    </div>
  </div>

  <article class="categories-container d-flex flex-column justify-content-between px-3">
    <% if @categories.count > 0 %>
      <% @categories.each do |category| %>
        <div class="px-3 py-3 mb-3 bg-body border border-2 border-light-subtle">
          <%= link_to user_category_expenses_path(current_user, category.id), class: "text-decoration-none" do %> 
            <div class="d-flex align-items-center justify-content-between gap-3">
              <%= image_tag category.icon, alt: "category_icon" %>

              <div class="flex-grow-1">
                <div class="d-flex justify-content-between align-items-center mb-2">
                  <h5 class="title mb-0"><%= category.name %></h5>
                  <span class="category-amount fw-bold">$<%= category.expenses.sum(&:amount) %></span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <span class="date fs-6"><%= category.created_at.strftime('%d%b %Y') %></span>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    <% else %>
      <span class="d-flex justify-content-center align-items-center p-3">You have no categories click Add Category to continue</span>
    <% end %>
  </article>

  <div class='add-category-btn text-center'>
    <%= link_to "Add New Category", new_user_category_path(current_user), class: 'new-category-btn border border-light-subtle text-light text-uppercase' %>
  </div>
</section>
